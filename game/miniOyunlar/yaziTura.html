<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>Yazı Tura</title>
  <link rel="stylesheet" href="../style.css">
  <style>
    :root{
      --size: 220px;
      --bg: linear-gradient(120deg,#0f172a,#001219);
    }
    *{box-sizing:border-box}
    body{min-height:100vh;display:flex;align-items:center;justify-content:center;background:var(--bggenel);font-family:Inter,system-ui,Segoe UI,Arial;margin:0;padding:24px}
    .card{width:100%;max-width:680px;background:rgba(255,255,255,0.03);padding:28px;border-radius:16px;box-shadow:0 6px 24px rgba(2,6,23,0.6);text-align:center}
    h1{margin:0 0 8px;font-weight:600}

    .stage{display:flex;gap:28px;align-items:center;justify-content:center;flex-wrap:wrap}

    /* Coin */
    .coin-wrap{width:var(--size);height:var(--size);perspective:1200px}
    .coin{
      width:100%;height:100%;border-radius:50%;position:relative;transform-style:preserve-3d;
      box-shadow:0 10px 30px rgba(0,0,0,0.6), inset 0 -10px 30px rgba(0,0,0,0.2);
      display:flex;align-items:center;justify-content:center;
      background:radial-gradient(circle at 30% 25%, rgba(255,255,255,0.06), transparent 20%), linear-gradient(180deg,#ffb703,#fbb800);
      border:8px solid rgba(255,255,255,0.06);
    }
    .coin .side{
      position:absolute;inset:0;border-radius:50%;backface-visibility:hidden;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:36px;letter-spacing:2px
    }
    .coin .heads{transform:rotateX(0deg);}
    .coin .tails{transform:rotateX(180deg);background:linear-gradient(180deg,#ffb703,#fbb800);}
    .coin::after{content:'';position:absolute;inset:6px;border-radius:50%;box-shadow:inset 0 6px 12px rgba(0,0,0,0.25);}

    .controls{display:flex;flex-direction:column;gap:12px;min-width:220px;align-items:center}
    button{appearance:none;background:linear-gradient(90deg,#06b6d4,#0ea5e9);border:none;
           color:white;padding:12px 18px;border-radius:12px;font-weight:700;cursor:pointer;box-shadow:0 6px 18px rgba(10,10,40,0.5)}
    button:disabled{opacity:.5;cursor:not-allowed;transform:none}
    button:active{transform:translateY(2px)}

    .result{font-size:18px;font-weight:700;padding:10px 14px;border-radius:10px;background:rgba(0,0,0,0.25);display:inline-block;transition:background .35s ease}
    .result.yazi { background: linear-gradient(90deg, #520081, #009edd); }
    .result.tura { background: linear-gradient(90deg, #fb7185, #fb854a); }

    .small{font-size:13px;color:var(--textgenel);}
    .text{
      color:var(--textgenel);
    }

    @keyframes coinFlip {
      0% { transform: rotateX(0deg); }
      25% { transform: rotateX(180deg); }
      50% { transform: rotateX(360deg); }
      75% { transform: rotateX(540deg); }
      100% { transform: rotateX(720deg); }
    }

    @media (max-width:560px){:root{--size:160px}.stage{flex-direction:column}}
    html, body {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;

      overflow: hidden;        /* yukarı-aşağı + sağ-sol kilit */
      overflow-x: hidden;
      overflow-y: hidden;

      touch-action: manipulation; /* mobilde zoom engelle */
      overscroll-behavior: none;  /* lastik efekti kapat */
    }
  </style>
</head>
<body>

  <div class="card">
    <h1 class="text">Yazı — Tura</h1>

    <div class="stage">
      <div class="coin-wrap">
        <div id="coin" class="coin" aria-hidden="true">
          <div class="side heads">YAZI</div>
          <div class="side tails">TURA</div>
        </div>
      </div>

      <div class="controls">
        <button id="flipBtn">At</button>
        <button onclick="goMenu()">Ana Menü</button>
        <div style="height:8px"></div>
        <div class="result" id="result">—</div>
        <div class="small text">Skor: <span id="score">Y:0 | T:0</span></div>
      </div>
    </div>
  </div>

  <script>
    const flipBtn = document.getElementById("flipBtn");
    const coin = document.getElementById("coin");
    const resultEl = document.getElementById("result");
    const scoreEl = document.getElementById("score");

    let yaziPuan = 0;
    let turaPuan = 0;
    const animasyonSuresi = 1800; // 1.8s

    flipBtn.addEventListener("click", () => {

      // butonu kilitle
      flipBtn.disabled = true;
      flipBtn.style.opacity = "0.5";

      // sonucu temizle
      resultEl.textContent = "—";
      resultEl.className = "result";

      // animasyonu başlat
      coin.style.animation = "coinFlip 1.8s ease";

      // animasyon bitince sonucu göster ve puanı ekle
      setTimeout(() => {
        const result = Math.random() < 0.5 ? "YAZI" : "TURA";

        resultEl.textContent = result;
        resultEl.classList.add(result.toLowerCase());

        if(result === "YAZI") yaziPuan++;
        else turaPuan++;

        scoreEl.textContent = `Y:${yaziPuan} | T:${turaPuan}`;

        // animasyonu sıfırla
        coin.style.animation = "";

        // coin yüzünü doğru konuma ayarla
        coin.style.transform = result === "YAZI" ? "rotateX(0deg)" : "rotateX(180deg)";

        // butonu aç
        flipBtn.disabled = false;
        flipBtn.style.opacity = "1";

      }, animasyonSuresi);
    });
    //------------TEMA----------//
function setTheme(theme) {
  document.documentElement.setAttribute("data-theme", theme);
  localStorage.setItem("theme", theme);

  if (theme === "light") {
    const savedBg = localStorage.getItem("lightBg");
    if (savedBg) {
      document.documentElement.style.setProperty("--bggenel", savedBg);
    }
  } else {
    document.documentElement.style.removeProperty("--bggenel");
  }
}

// sayfa açılınca
window.addEventListener("DOMContentLoaded", () => {
  const theme = localStorage.getItem("theme") || "dark";
  document.documentElement.setAttribute("data-theme", theme);

  if (theme === "light") {
    const savedBg = localStorage.getItem("lightBg");
    if (savedBg) {
      document.documentElement.style.setProperty("--bggenel", savedBg);
    }
  }
});

// light tema arka planı
function setLightBg(color) {
  document.documentElement.style.setProperty("--bggenel", color);
  localStorage.setItem("lightBg", color);
}
window.addEventListener("DOMContentLoaded", () => {
  const theme = localStorage.getItem("theme") || "dark";
  document.documentElement.setAttribute("data-theme", theme);

  if (theme === "dark") {
    // DARK ise XOX arka planı sabitle
    document.documentElement.style.setProperty("--bggenel", "#0f1724");
  } else {
    // LIGHT ise seçilen light rengini kullan
    const savedBg = localStorage.getItem("lightBg");
    if (savedBg) {
      document.documentElement.style.setProperty("--bggenel", savedBg);
    }
  }
});

    function goMenu() {
    window.location.href = "../../index.html"; 
}
  </script>

</body>
</html>

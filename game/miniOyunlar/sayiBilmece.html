<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>2 Kişilik Sayı Tahmin Oyunu</title>
<link rel="stylesheet" href="style.css">

<style>
  :root{
    --bg:#0f1724; --card:#0b1220; --accent:#2dd4bf; --muted:#94a3b8;
    --glass: rgba(255,255,255,0.03);
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto;
  }
  *{box-sizing:border-box}
  body{
    margin:0; min-height:100vh; display:flex; align-items:center; justify-content:center;
    background:linear-gradient(180deg,var(--bg),#071025); color:#e6eef6;
    padding:20px;
  }
  .app{
    width:100%; max-width:760px; background:linear-gradient(180deg,var(--card), #071722);
    border-radius:12px; padding:18px; box-shadow:0 10px 30px rgba(2,6,23,0.6);
  }
  header{display:flex; align-items:center; justify-content:space-between; gap:12px}
  h1{font-size:20px; margin:0}
  .controls{display:flex; gap:8px; align-items:center}
  button{background:var(--accent); color:#052024; border:0; padding:8px 12px; border-radius:8px; cursor:pointer; font-weight:600}
  button.ghost{background:transparent; color:var(--muted); border:1px solid rgba(255,255,255,0.04)}
  .row{display:flex; gap:12px; margin-top:14px; flex-wrap:wrap}
  .card{background:var(--glass); padding:14px; border-radius:10px; flex:1; min-width:220px}
  label{display:block; color:var(--muted); font-size:13px; margin-bottom:6px}
  input[type="number"], input[type="password"]{
    width:100%; padding:10px 12px; border-radius:8px; border:1px solid rgba(255,255,255,0.04);
    background:transparent; color:inherit; outline:none; font-size:15px;
  }
  .feedback{margin-top:12px; font-size:18px; font-weight:700}
  .overlay{
    position:fixed; left:0; top:0; right:0; bottom:0; display:flex; align-items:center; justify-content:center;
    background:linear-gradient(180deg, rgba(1,6,10,0.7), rgba(1,6,10,0.9)); z-index:40;
    padding:20px;
  }
  .overlay .panel{background:#071322; padding:18px; border-radius:10px; text-align:center; width:100%; max-width:420px}
  footer{margin-top:14px; display:flex; gap:8px; align-items:center; justify-content:space-between}
  .score{display:flex; gap:12px; align-items:center}
  .pill{background:rgba(255,255,255,0.03); padding:8px 10px; border-radius:999px}
</style>
</head>

<body>
  <div class="app">

    <header>
      <div>
        <h1>2 Kişilik Sayı Tahmin Oyunu</h1>
      </div>

      <div class="controls">
        <button id="resetBtn" class="ghost">Oyunu Sıfırla</button>
        <button id="newRoundBtn">Yeni Tur</button>
        <button onclick="goMenu()">Ana Menü</button>
      </div>
    </header>

    <div class="row" style="margin-top:16px">
      <div class="card">

        <div style="display:flex; justify-content:space-between; align-items:center">

          <div>
            <div class="muted">Skor</div>
            <div class="score">
              <div class="pill">Oyuncu 1: <strong id="score1">0</strong></div>
              <div class="pill">Oyuncu 2: <strong id="score2">0</strong></div>
            </div>
          </div>
        </div>

        <div style="margin-top:16px">

          <!-- Aralık Ayarı -->
          <div style="display:flex; gap:8px; flex-wrap:wrap">
            <div style="flex:1">
              <label>Aralık — Min</label>
              <input type="number" id="minRange" value="1" />
            </div>

            <div style="flex:1">
              <label>Aralık — Max</label>
              <input type="number" id="maxRange" value="100" />
            </div>

            <button id="applyRange" style="min-width:150px">Aralığı Uygula</button>
          </div>

          <!-- Gizli Sayılar -->
          <div id="secret1Box" style="margin-top:16px">
            <label>Gizli Sayı (Oyuncu 1)</label>
            <input id="secret1" type="password" placeholder="Gizli sayı" />
            <button id="setSecret1">Onayla (1)</button>
          </div>

          <div id="secret2Box" style="margin-top:16px; display:none">
            <label>Gizli Sayı (Oyuncu 2)</label>
            <input id="secret2" type="password" placeholder="Gizli sayı" />
            <button id="setSecret2">Onayla (2)</button>
          </div>

          <!-- Tahmin Alanı -->
          <div id="guessBox" style="margin-top:18px; display:none">
            <label>Sıra: Oyuncu <span id="turnPlayer">1</span></label>
            <div style="display:flex; gap:8px; align-items:center">
              <input id="guessInput" type="number" placeholder="Tahmin">
              <button id="submitGuess">Tahmin Et</button>
            </div>
            <div class="feedback" id="feedback"></div>
          </div>

        </div>

      </div>
    </div>
  </div>

  <!-- Cihaz devretme ekranı -->
  <div id="passOverlay" class="overlay" style="display:none">
    <div class="panel">
      <h2>Hazır!</h2>
      <p class="muted">Cihazı diğer oyuncuya ver.</p>
      <button id="readyBtn">Başla</button>
    </div>
  </div>

<script>
(() => {

  let min = 1, max = 100;

  let secret1 = null;
  let secret2 = null;

  let scores = {1:0,2:0};

  let turn = 1;       // 1 → Oyuncu 1 tahmin ediyor, 2 → Oyuncu 2 tahmin ediyor
  let firstWinner = null;
  let extraPhase = false; // İlk bilen Oyuncu 1 ise son şans aktif olacak

  const score1El = document.getElementById("score1");
  const score2El = document.getElementById("score2");

  const turnLabel = document.getElementById("turnLabel");
  const turnPlayerEl = document.getElementById("turnPlayer");

  const passOverlay = document.getElementById("passOverlay");
  const readyBtn = document.getElementById("readyBtn");

  const secret1Box = document.getElementById("secret1Box");
  const secret2Box = document.getElementById("secret2Box");
  const guessBox = document.getElementById("guessBox");

  const secret1Input = document.getElementById("secret1");
  const secret2Input = document.getElementById("secret2");

  const guessInput = document.getElementById("guessInput");
  const feedback = document.getElementById("feedback");

  // Aralık Uygula
  document.getElementById("applyRange").onclick = () => {
    const a = Number(document.getElementById("minRange").value);
    const b = Number(document.getElementById("maxRange").value);
    if (a >= b) return alert("Min < Max olmalı.");
    min = a; max = b;
    alert("Aralık uygulandı.");
  };

  // Gizli sayı 1
  document.getElementById("setSecret1").onclick = () => {
    const n = Number(secret1Input.value);
    if (!n || n < min || n > max) return alert("Geçerli sayı gir!");
    secret1 = n;
    turnLabel.textContent = "Oyuncu 2 gizli sayı giriyor...";
    secret1Box.style.display = "none";
    secret2Box.style.display = "";
    passOverlay.style.display = "flex";
  };

  // Gizli sayı 2
  document.getElementById("setSecret2").onclick = () => {
    const n = Number(secret2Input.value);
    if (!n || n < min || n > max) return alert("Geçerli sayı gir!");
    secret2 = n;
    secret2Box.style.display = "none";
    passOverlay.style.display = "flex";
    turnLabel.textContent = "Tahmin başlıyor!";
  };

  readyBtn.onclick = () => {
    passOverlay.style.display = "none";
    if (secret1 && secret2) {
      guessBox.style.display = "";
    }
  };

  // Tahmin Etme
  document.getElementById("submitGuess").onclick = () => {

    const g = Number(guessInput.value);
    if (!g || g < min || g > max) return alert("Tahmin aralıkta olmalı.");

    feedback.textContent = "";

    // Oyuncu 1 → secret2 tahmin eder
    if (turn === 1) {
      if (g === secret2) {
        firstWinner = 1;
        extraPhase = true;   // oyuncu 2’ye ekstra hak verilecek
        feedback.textContent = "Oyuncu 1 bildi! Oyuncu 2’ye son bir şans!";
        turn = 2;
        turnPlayerEl.textContent = 2;
        guessInput.value = "";
        return;
      }

      feedback.textContent = g > secret2 ? "Daha küçük!" : "Daha büyük!";
      turn = 2;
    }

    // Oyuncu 2 → secret1 tahmin eder
    else {
      if (g === secret1) {

        // NORMAL kazanç
        if (!extraPhase) {
          alert("Kazanan: Oyuncu 2!");
          scores[2]++;
          endRound();
          return;
        }

        // EKSTRA HAKTA BİLDİ → her iki oyuncu puan alır
        if (extraPhase) {
          alert("Oyuncu 2 son hakkıyla bildi! Her iki oyuncu +1 puan!");
          scores[1]++;
          scores[2]++;
          endRound();
          return;
        }
      }

      // Ekstra hak vardı ve Oyuncu 2 bilemedi → Oyuncu 1 kazanır
      if (extraPhase) {
        alert("Oyuncu 2 son hakkı kaçırdı! Kazanan: Oyuncu 1!");
        scores[1]++;
        endRound();
        return;
      }

      feedback.textContent = g > secret1 ? "Daha küçük!" : "Daha büyük!";
      turn = 1;
    }

    turnPlayerEl.textContent = turn;
    guessInput.value = "";
  };

  function endRound(){
    score1El.textContent = scores[1];
    score2El.textContent = scores[2];

    // Yeni tura hazırlık
    secret1 = null;
    secret2 = null;
    firstWinner = null;
    extraPhase = false;

    turn = 1;
    turnPlayerEl.textContent = 1;
    feedback.textContent = "";

    guessBox.style.display = "none";
    secret1Box.style.display = "";
    secret2Box.style.display = "none";

    turnLabel.textContent = "Yeni tur – Oyuncu 1 gizli sayı giriyor";
  }

  document.getElementById("newRoundBtn").onclick = endRound;

  document.getElementById("resetBtn").onclick = () => {
    if (!confirm("Oyun tamamen sıfırlansın mı?")) return;
    scores = {1:0,2:0};
    score1El.textContent = 0;
    score2El.textContent = 0;
    endRound();
  };

})();
/*----------------TEMA-------------------*/
function setTheme(theme) {
  document.documentElement.setAttribute("data-theme", theme);
  localStorage.setItem("theme", theme);

  if (theme === "light") {
    const savedBg = localStorage.getItem("lightBg");
    if (savedBg) {
      document.documentElement.style.setProperty("--bg", savedBg);
    }
  } else {
    document.documentElement.style.removeProperty("--bg");
  }
}

// sayfa açılınca
window.addEventListener("DOMContentLoaded", () => {
  const theme = localStorage.getItem("theme") || "dark";
  document.documentElement.setAttribute("data-theme", theme);

  if (theme === "light") {
    const savedBg = localStorage.getItem("lightBg");
    if (savedBg) {
      document.documentElement.style.setProperty("--bg", savedBg);
    }
  }
});

// light tema arka planı
function setLightBg(color) {
  document.documentElement.style.setProperty("--bg", color);
  localStorage.setItem("lightBg", color);
}
window.addEventListener("DOMContentLoaded", () => {
  const theme = localStorage.getItem("theme") || "dark";
  document.documentElement.setAttribute("data-theme", theme);

  if (theme === "dark") {
    // DARK ise XOX arka planı sabitle
    document.documentElement.style.setProperty("--bg", "#0f1724");
  } else {
    // LIGHT ise seçilen light rengini kullan
    const savedBg = localStorage.getItem("lightBg");
    if (savedBg) {
      document.documentElement.style.setProperty("--bg", savedBg);
    }
  }
});

  function goMenu() {
    window.location.href = "../../index.html"; 
}
</script>

</body>
</html>
